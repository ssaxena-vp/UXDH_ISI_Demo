<!DOCTYPE html>
<html>
<head>
    <title>UXDH ISI Demo</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link href="css/isiDemo.css" rel="stylesheet">
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

</head>

<body>

    <!-- Fixed navbar -->
    <nav class="navbar navbar-default navbar-fixed-top" style="width: 100%; height: 50px;">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">PRODUCT-LOGO</a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="#">Menu-Item-1</a></li>
                    <li><a href="#">Menu-Item-2</a></li>
                    <li><a href="#">Menu-Item-3</a></li>
                    <li><a href="#">Menu-Item-4</a></li>
                    <li><a href="#">Menu-Item-5</a></li>
                </ul>
            </div><!--/.nav-collapse -->
        </div>
    </nav>

    <!-- banner image container -->
    <div class="container" id="backgroundContainer" style="height: auto; padding-top: 50px; z-index: -100;">
        <!-- Main component for a primary marketing message or call to action -->
        <div class="jumbotron">
            <h1>de Finibus Bonorum et Malorum</h1>
            <p>Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit. <br/>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque pellentesque nisl dui, sed dapibus magna dapibus vel. Curabitur sed quam et elit mollis finibus.</p>
            <p>
            <a class="btn btn-lg btn-default" href="../../components/#navbar" role="button">PRIMARY CALL-TO-ACTION</a> <!-- &raquo; -->
            </p>
        </div>

        <div class="row">
            <div class="col-sm-4 placeholderContainers">
                <div class="innerContainer"></div>
            </div>
            <div class="col-sm-4 placeholderContainers">
                <div class="innerContainer"></div>
            </div>
            <div class="col-sm-4 placeholderContainers">
                <div class="innerContainer"></div>
            </div>
        </div>

        <br/>

        <div class="row">
            <div class="col-xs-12">
                <p class="placeholderBodyText">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                </p>
            </div>
        </div>

        <br /><hr /><br />

        <div class="row">
            <div class="col-sm-4 placeholderContainers">
                <h3>Sub-Heading 1</h3>
                <p class="placeholderBodyText">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
                </p>
                <br />
                <button type="button" class="btn btn-lg btn-default subCTAButtons" style="width: 100%">Some Call-to-action here</button>
            </div>

            <div class="col-sm-4 placeholderContainers">
                <h3>Sub-Heading 2</h3>
                <p class="placeholderBodyText">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
                </p>
                <br />
                <button type="button" class="btn btn-lg btn-default subCTAButtons" style="width: 100%">Some Call-to-action here</button>
            </div>

            <div class="col-sm-4 placeholderContainers">
                <h3>Sub-Heading 3</h3>
                <p class="placeholderBodyText">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
                </p>
                <br />
                <button type="button" class="btn btn-lg btn-default subCTAButtons" style="width: 100%">Some Call-to-action here</button>
            </div>
        </div>

        <br /><hr /><br />

        <div class="row">
            <div class="col-xs-12">
                <p class="placeholderBodyText">
                Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt.

                Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?
                </p>
            </div>
        </div>
    </div> <!-- /container -->

    
    <!-- Trigger point for ISI merge -->
    <div class="container" id="triggerPointForISIMerge">
        <div class="row">
            <div class="col-xs-12"></div>
        </div>
    </div>
    
    
    <!-- --------------------  ISI Container -------------------- -->
    <div class="container-fluid" id="isiModal">

        <div class="container-fluid isiHeaderStripWrapper">
            <div class="container">
                <div class="row">
                    <div class="col-xs-12 isiHeader">
                        <span class="isiHeaderTitle">Indications and Important Safety Information</span>
                        <br />
                        <span class="isiHeaderWarning">Warning: Potential Risk of Condition X</span>
                        <a id="isiButtonAnchor">
                            <div id="isiButton">
                                <img id="isiToggleArrow" src="assets/uparrow.png" />&nbsp;
                                <span id="isiReadLabel">Read More</span>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <div class="container" id="isiBodyWrapper">
            <!-- Peeking Indications content -->
            <div class="row">
                <div class="col-xs-12" id="isiPeekingContentWrapper">
                    <span id="isiPeekingContentLabel">WARNING</span>
                    <div id="isiPeekingContentBody">
                        <span>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.</span>
                    </div>
                </div>
            </div>
            
            <!-- Full ISI contents upon clicking the ISI strip -->
            <div id="isiFullContentsWrapper" style="height:auto;">
                <h3>Indications</h3>
                <p class="placeholderBodyText">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.
                </p>
                <h3>Important Safety Information</h3>
                <div class="placeholderBodyText blackboxWarning">
                    <h3 id="blackboxWarningLabel">WARNING: POTENTIAL RISK OF CONDITION X</h3>
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.
                </div>
                <br />
                <p class="placeholderBodyText">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.
                <br /><br />
                Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                </p>
                <h3>Instructions for Use</h3>
                <p class="placeholderBodyText">
                Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.
                <br /><br />
                Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.
                <br /><br />
                <ul>
                    <li>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</li>
                    <li>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</li>
                    <li>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</li>
                    <li>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.</li>
                </ul>
                </p>
                <br />
                <p class="placeholderBodyText">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.
                </p>
            </div>
        </div>
    </div>
    
    <!-- footer -->
    <div class="container-fluid">
        <div class="row">
            <div class="col-xs-12 footer">
            </div>
        </div>
    </div>  
    

    <!-- Script -->
    <script>
        jQuery(document).ready(function($) {
            var mq = window.matchMedia("(min-width: 476px)");
            var viewport; //0: mobile, 1: desktop
            toggleISI = 0; //0: default, 1: collapsed, 2: modal expanded

            if (mq.matches)
            viewport = 1; //desktop viewport
            else
            viewport = 0; //mobile viewport
            $('#isiModal').addClass('isiModal-addShadow');
            
//        if(viewport == 1) { //for desktop viewport

        //scroll effect for ISI
        $(window).scroll(function() {
            var h = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
            var scrollTop = $(window).scrollTop();
            elementOffset = $('#triggerPointForISIMerge').offset().top + 50;
            distance = (elementOffset - scrollTop);
            triggerPointForISIMergePos = distance - (h - 60); //60 to accomodate for strip's height

            $('#isiPeekingContentWrapper').animate({opacity: '0'}, 300);
            if(toggleISI == 0) { //default
                $('#isiModal').animate({top: 'auto', bottom: '0px', height: '60px', position: 'fixed'}, 300);
                $('body').css({overflow: 'scroll'});
                toggleISI = 1;
            }
            else if (toggleISI == 1) {
                $('#isiModal').css({top: 'auto', bottom: '0px', height: '60px', position: 'fixed'});
                $('body').css({overflow: 'scroll'});
                if(triggerPointForISIMergePos < 0) {
                    $('#isiModal').css({position: 'relative', height: 'auto', zIndex: 0});
                    $('#isiModal').removeClass("isiModal-addShadow").addClass("isiModal-removeShadow");
                    $('#isiButtonAnchor').css({display:"none"});                          
                }
                else {
                    $('#isiModal').css({zIndex: 5});
                    $('#isiModal').removeClass("isiModal-removeShadow").addClass("isiModal-addShadow");
                    $('#isiButtonAnchor').css({display:"inline"}); 
                }
                $('.isiHeaderStripWrapper').removeClass('affix');
            }
            else if(toggleISI == 2) {
                $('#isiModal').css({top: '50px', height: 'auto', overflow: 'scroll'});
                $('body').css({overflow: 'hidden'});
                $('.isiHeaderStripWrapper').addClass('affix');
            }
            $('#isiPeekingContentWrapper').css({display:"none"});
        });

        $(".isiHeaderStripWrapper").click(function() {
            $('#isiPeekingContentWrapper').animate({opacity: '0'}, 300);
            $('#isiPeekingContentWrapper').css({display:"none"});
            $('#isiModal').css({overflow: 'hidden'});
            $('body').css({overflow: 'scroll'});
            if(toggleISI == 1 || toggleISI == 0) {
                $('#isiModal').animate({top: '50px', height: '100%'}, 300);
                // $('.isiHeaderStripWrapper').css({position: 'fixed'});
                // $(window).off('.affix');
                // $(".isiHeaderStripWrapper").removeClass("affix affix-top affix-bottom").removeData("bs.affix");
                // $('.isiHeaderStripWrapper').affix({
                //   offset: {
                //     top: 0
                //   }
                // });
                $("#isiToggleArrow").attr("src", "assets/downarrow.png");
                $("#isiReadLabel").text("Collapse");
                toggleISI = 2;
            }
            else if(toggleISI == 2) {
                $('.isiHeaderStripWrapper').removeClass('affix');
                $('#isiModal').css({top: 'auto'}).animate({bottom: '0px', height: '60px', position: 'fixed'}, 300);
                // $('.isiHeaderStripWrapper').affix({
                //   offset: {
                //     top: 0
                //   }
                // });
                $("#isiToggleArrow").attr("src", "assets/uparrow.png");
                $("#isiReadLabel").text("Read More");
                toggleISI = 1;
            }
        });
//      }
        }); // doc ready end
    </script>

</body>
</html>
